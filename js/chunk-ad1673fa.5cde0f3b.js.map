{"version":3,"sources":["webpack:///./src/router/views/store/storeList.vue","webpack:///./src/api/graphql/mutations/stores.js","webpack:///src/router/views/store/storeList.vue","webpack:///./src/router/views/store/storeList.vue?47eb","webpack:///./src/router/views/store/storeList.vue?2845","webpack:///./src/api/graphql/query/stores.js"],"names":["render","_vm","this","_c","_self","attrs","title","_v","_s","currentStoreUser","staticClass","_l","stores","store","index","key","staticStyle","node","name","on","$event","changeStore","id","staticRenderFns","CHANGESTORE","gql","components","Layout","PageHeader","data","computed","storeComputed","methods","storeActions","getListStore","query","response","allStoresUser","console","idInt","decode_bs64","mutation","variables","changeCurrentStore","isSuccess","number","toast","setTimeout","beforeMount","component","LISTSTORES","ALL_STORES"],"mappings":"yIAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,SAAS,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQJ,EAAIK,SAASH,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,KAAK,CAACJ,EAAIM,GAAG,0GAA0GJ,EAAG,SAAS,CAACF,EAAIM,GAAGN,EAAIO,GAAGP,EAAIQ,uBAAuBN,EAAG,MAAM,CAACO,YAAY,OAAOT,EAAIU,GAAIV,EAAIW,QAAQ,SAASC,EAAMC,GAAO,OAAOX,EAAG,MAAM,CAACY,IAAID,EAAMJ,YAAY,YAAY,CAACP,EAAG,SAAS,CAACO,YAAY,OAAOM,YAAY,CAAC,YAAY,SAASX,MAAM,CAAC,MAAQQ,EAAMI,KAAKC,KAAK,UAAU,0CAA0C,UAAU,QAAQ,UAAU,GAAG,IAAM,YAAY,CAACf,EAAG,WAAW,CAACE,MAAM,CAAC,QAAU,WAAWc,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOnB,EAAIoB,YAAYR,EAAMI,KAAKK,GAAIT,EAAMI,KAAKC,SAAS,CAACjB,EAAIM,GAAG,2BAA2B,IAAI,MAAK,IAAI,IAEvzBgB,EAAkB,G,sHCAhBC,EAAcC,eAAH,0I,oCCsCF,GACfC,YACAC,cACAC,mBAEAC,KALA,WAMA,OACAvB,gBACAM,YAGAkB,2BACAC,QAEAC,yCACAC,QADA,IAEAC,aAFA,WAEA,qLAEA,iBACAC,eAHA,OAEAC,EAFA,OAKAC,EAAAD,OAAAC,cACA,WACA,kBAPA,mDAUAC,kBAVA,4DAaAjB,YAfA,SAeAC,EAAAJ,GAAA,uKACAqB,EAAAC,gCADA,kBAGA,kBACAC,WACAC,WACA7B,WANA,OAGAuB,EAHA,OASAO,EAAAP,OAAAO,mBACA,WACAC,EAAAD,WACA,QACA,qBACAzB,OACA2B,WAEAC,sDACAC,uBACA,gBAAA7B,mBACA,OApBA,mDAwBA4B,4DAxBA,8DA4BAE,YAzDA,WA0DA,sBClGiX,I,YCO7WC,EAAY,eACd,EACAjD,EACAuB,GACA,EACA,KACA,WACA,MAIa,aAAA0B,E,+IChBTC,EAAazB,eAAH,6PAeV0B,EAAa1B,eAAH","file":"js/chunk-ad1673fa.5cde0f3b.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('layout',[_c('page-header',{attrs:{\"title\":_vm.title}}),_c('b-alert',{attrs:{\"show\":\"\"}},[_vm._v(\"A continuación selecciona la tienda en la cuál vas a trabajar. Actualmente te encuentras en la tienda \"),_c('strong',[_vm._v(_vm._s(_vm.currentStoreUser))])]),_c('div',{staticClass:\"row\"},_vm._l((_vm.stores),function(store,index){return _c('div',{key:index,staticClass:\"col-md-3\"},[_c('b-card',{staticClass:\"mb-2\",staticStyle:{\"max-width\":\"20rem\"},attrs:{\"title\":store.node.name,\"img-src\":\"https://picsum.photos/600/300/?image=25\",\"img-alt\":\"Image\",\"img-top\":\"\",\"tag\":\"article\"}},[_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.changeStore(store.node.id, store.node.name)}}},[_vm._v(\" Seleccionar tienda \")])],1)],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import gql from 'graphql-tag'\n\nconst CHANGESTORE = gql`mutation changeCurrentStore($store: Int!){\n    changeCurrentStore(store: $store){\n        success\n    }\n}`\n\nexport {\n    CHANGESTORE\n}","<template>\n  <layout>\n    <page-header :title=\"title\"> </page-header>\n    <b-alert show>A continuación selecciona la tienda en la cuál vas a trabajar.\n      Actualmente te encuentras en la tienda <strong>{{ currentStoreUser }}</strong>\n    </b-alert>\n    <div class=\"row\">\n      <div \n        v-for=\"(store, index) in stores\" :key=\"index\"\n        class=\"col-md-3\"\n      >\n        <b-card\n          :title=\"store.node.name\"\n          img-src=\"https://picsum.photos/600/300/?image=25\"\n          img-alt=\"Image\"\n          img-top\n          tag=\"article\"\n          style=\"max-width: 20rem\"\n          class=\"mb-2\"\n        >\n          <b-button \n            @click=\"changeStore(store.node.id, store.node.name)\" \n            variant=\"primary\"\n          >\n            Seleccionar tienda\n          </b-button>\n        </b-card>\n      </div>\n    </div>\n  </layout>\n</template>\n<script>\nimport Layout from \"../../layouts/main\";\nimport PageHeader from \"@/components/page-header\";\nimport { LISTSTORES } from '@/api/graphql/query/stores'\nimport { CHANGESTORE } from '@/api/graphql/mutations/stores'\nimport { storeActions, storeComputed } from '@/state/helpers'\nimport { toast } from '@/utils/alerts'\nimport { decode_bs64 } from '@/utils/general'\n\nexport default {\n  components: {\n    Layout,\n    PageHeader,\n  },\n  data() {\n    return {\n      title: \"Tiendas\",\n      stores: [],\n    };\n  },\n  computed: {\n    ...storeComputed\n  },\n  methods: {\n    ...storeActions,\n    async getListStore(){\n      try {\n        const response = await this.$apollo.query({\n          query: LISTSTORES\n        })\n        const { allStoresUser } = response.data\n        if (allStoresUser !== null){\n          this.stores = allStoresUser.edges\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n    async changeStore(id, name){\n      const idInt = decode_bs64( id ).split(':')[1]\n      try {\n        const response = await this.$apollo.mutate({\n          mutation: CHANGESTORE,\n          variables: {\n            store: idInt\n          }\n        })\n        const { changeCurrentStore } = response.data\n        if (changeCurrentStore !== null){\n          const isSuccess = changeCurrentStore.success\n          if (isSuccess === true){\n            this.changeStoreAction({\n              name: name,\n              number: idInt\n            })\n            toast('success', 'Exito, redireccionando...')\n            setTimeout(() => {\n              this.$router.push({name: 'default'})\n            }, 2000)\n          }\n        }\n      } catch (error) {\n        toast('error', 'No se pudo completar la operación')\n      }\n    },\n  },\n  beforeMount(){\n    this.getListStore()\n  }\n};\n</script>\n<style scoped>\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storeList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./storeList.vue?vue&type=template&id=73186ba0&scoped=true&\"\nimport script from \"./storeList.vue?vue&type=script&lang=js&\"\nexport * from \"./storeList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73186ba0\",\n  null\n  \n)\n\nexport default component.exports","import gql from 'graphql-tag'\n\nconst LISTSTORES = gql`query listStore{\n    allStoresUser{\n        pageInfo{\n            hasNextPage\n        }\n        edges{\n            cursor\n            node{\n                name\n                id\n            }\n        }\n    }\n}`\n\nconst ALL_STORES = gql`query stores{\n    allStores{\n        edges{\n            node{\n                name\n                id\n            }\n        }\n    }\n}`\n\nexport {\n    LISTSTORES,\n    ALL_STORES\n}"],"sourceRoot":""}