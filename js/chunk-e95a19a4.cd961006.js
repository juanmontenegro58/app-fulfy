(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e95a19a4"],{"498a":function(t,e,r){"use strict";var a=r("23e7"),n=r("58a8").trim,o=r("c8d2");a({target:"String",proto:!0,forced:o("trim")},{trim:function(){return n(this)}})},"5c3f":function(t,e,r){"use strict";r.r(e);r("b0c0"),r("498a");var a=function(){var t=this,e=t._self._c;return e("layout",[e("page-header",{attrs:{title:t.title}}),e("div",[e("b-col",{attrs:{md:"12"}},[e("b-card",{staticClass:"mb-2"},[e("b-card-text",[e("form-wizard",{scopedSlots:t._u([{key:"footer",fn:function(r){return[e("div",{staticClass:"wizard-footer-left"},[r.activeTabIndex>1&&!r.isLastStep?e("wizard-button",{style:r.fillButtonStyle},[t._v("Anterior")]):t._e()],1),e("div",{staticClass:"wizard-footer-right"},[r.isLastStep?e("wizard-button",{staticClass:"wizard-footer-right finish-button",style:r.fillButtonStyle,nativeOn:{click:function(e){return t.onComplete()}}},[t._v(t._s(r.isLastStep?"Finalizar":"Siguiente"))]):e("wizard-button",{staticClass:"wizard-footer-right",style:r.fillButtonStyle,attrs:{disabled:t.loadingProduct||t.loadingCreate},nativeOn:{click:function(t){return r.nextTab()}}},[t.loadingCreate?[e("b-spinner",{attrs:{small:"",type:"grow"}}),t._v(" Cargando... ")]:[t._v(" Siguiente ")]],2)],1)]}}])},[e("tab-content",{attrs:{title:"Editar Producto","before-change":function(){return t.validate()}}},[e("b-row",[e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Nombre","invalid-feedback":"Este campo es requerido"}},[t.loadingProduct?[e("b-skeleton",{attrs:{type:"input"}})]:[e("b-form-input",{attrs:{state:t.state(t.$v.form.name),disabled:t.loadingCreate},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})]],2)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Precio","invalid-feedback":"Este campo es requerido"}},[t.loadingProduct?[e("b-skeleton",{attrs:{type:"input"}})]:[e("b-form-input",{attrs:{state:t.state(t.$v.form.price),type:"number",disabled:t.loadingCreate},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price","string"===typeof e?e.trim():e)},expression:"form.price"}})]],2)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Unidades","invalid-feedback":"Este campo es requerido"}},[t.loadingProduct?[e("b-skeleton",{attrs:{type:"input"}})]:[e("b-form-input",{attrs:{state:t.state(t.$v.form.stock),type:"number",disabled:t.loadingCreate},model:{value:t.form.stock,callback:function(e){t.$set(t.form,"stock","string"===typeof e?e.trim():e)},expression:"form.stock"}})]],2)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Imagen","invalid-feedback":"Este campo es requerido"}},[t.loadingProduct?[e("b-skeleton",{attrs:{type:"input"}})]:[e("b-form-file",{staticClass:"form-control",attrs:{plain:"",accept:"image/*",disabled:t.loadingCreate},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})]],2)],1),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:"Categoria","invalid-feedback":"Este campo es requerido"}},[t.loadingProduct?[e("b-skeleton",{attrs:{type:"input"}})]:[e("b-form-select",{staticClass:"form-control",attrs:{state:t.state(t.$v.form.category),options:t.categories,disabled:t.loadingCreate},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})]],2)],1)],1)],1),e("tab-content",{attrs:{title:"Código de barras"}},[e("div",{staticClass:"text-center",attrs:{id:"bar-code"}},[e("barcode",{attrs:{value:t.sku,format:"",width:"1"}})],1),e("div",{staticClass:"text-center"},[e("b-button",{on:{click:function(e){return t.printBarCode()}}},[t._v("Descargar el código de barras")])],1)])],1)],1)],1)],1)],1)],1)},n=[],o=r("b85c"),c=r("c7eb"),i=r("1da1"),u=r("5530"),s=(r("ac1f"),r("1276"),r("444f")),d=r("2579"),l=r("b5ae"),p=r("2ee4"),b=r("4d77"),f=r("6816"),m=r("6191"),g=r("9b8d"),v=r("154f"),k=r("f579"),y=r.n(k),C=(r("da93"),{components:{Layout:s["a"],PageHeader:d["a"],FormWizard:p["FormWizard"],TabContent:p["TabContent"],barcode:y.a,WizardButton:p["WizardButton"]},data:function(){return{title:"Productos",form:{name:null,price:null,image:null,category:null,store:null,active:!0,stock:null},id:null,sku:null,categories:[{value:null,text:"Selecciona una opción de la lista"}],loadingProduct:!0,loadingCreate:!1}},validations:{form:{name:{required:l["required"]},price:{required:l["required"],numeric:l["numeric"]},category:{required:l["required"]},stock:{required:l["required"],numeric:l["numeric"]}}},computed:Object(u["a"])({},b["i"]),methods:{validate:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var r,a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$v.form.$touch(),r=!t.$v.form.$invalid,t.form.store=t.idCurrentStore,!0!==r){e.next=10;break}return e.next=6,t.updateProduct();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))()},state:function(t){var e=t.$dirty,r=t.$error;return e?!r:null},onComplete:function(){this.$router.push({name:"list-products"})},updateProduct:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var r,a,n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingCreate=!0,r=Object(v["a"])(t.id).split(":")[1],e.prev=2,e.next=5,t.$apollo.mutate({mutation:f["d"],variables:{product:Object(u["a"])({},t.form),id:r}});case 5:if(a=e.sent,n=a.data.updateProduct,t.loadingCreate=!1,null===n){e.next=13;break}return t.sku=n.product.sku,e.abrupt("return",!0);case 13:return Object(g["b"])("error","No se pudo guardar el producto."),e.abrupt("return",!1);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),t.loadingCreate=!1,Object(g["b"])("error","No se pudo guardar el producto.");case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))()},getCategory:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var r,a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.query({query:m["a"]});case 3:r=e.sent,a=r.data.allCategory,null!==a?t.formatCategorySelect(a):Object(g["b"])("error","No se pudo recuperar las categorias."),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),Object(g["b"])("error","No se pudo recuperar las categorias.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getProduct:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var r,a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.query({query:f["c"],variables:{sku:t.$route.params.sku}});case 3:r=e.sent,a=r.data.getProduct,null!==a?(t.id=a.id,t.form=t.formatDataProduct(a),t.loadingProduct=!1):(t.loadingProduct=!1,Object(g["b"])("error","No se logró recuperar la información del producto.")),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),t.loadingProduct=!1,Object(g["b"])("error","No se logró recuperar la información del producto.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},formatDataProduct:function(t){return{name:t.name,price:parseInt(t.price),category:t.category.id,store:t.store.id,active:t.active,stock:parseInt(t.stock)}},formatCategorySelect:function(t){var e,r=Object(o["a"])(t);try{for(r.s();!(e=r.n()).done;){var a=e.value,n={value:a.id,text:a.name};this.categories.push(n)}}catch(c){r.e(c)}finally{r.f()}},printBarCode:function(){var t=document.getElementById("bar-code"),e=window.open();e.document.write(t.innerHTML),e.document.close(),e.print(),e.close()}},beforeMount:function(){this.getProduct(),this.getCategory()}}),O=C,h=r("2877"),P=Object(h["a"])(O,a,n,!1,null,null,null);e["default"]=P.exports},6191:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a,n=r("8785"),o=r("5184"),c=Object(o["a"])(a||(a=Object(n["a"])(["query allCategories{\n    allCategory{\n        name\n        id\n    }    \n}"])))},6816:function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return d})),r.d(e,"d",(function(){return l})),r.d(e,"c",(function(){return p}));var a,n,o,c,i=r("8785"),u=r("5184"),s=Object(u["a"])(a||(a=Object(i["a"])(["mutation deleteProduct($id: ID!){\n    deleteProduct(id: $id){\n        success\n    }\n}"]))),d=Object(u["a"])(n||(n=Object(i["a"])(["mutation createProduct($product: ProductCreateInput!){\n    createProduct(product: $product){\n        product{\n            id \n            name \n            image \n            sku\n        }\n    }\n}\n"]))),l=Object(u["a"])(o||(o=Object(i["a"])(["mutation updateProduct($product: ProductEditInput!, $id: ID!){\n    updateProduct(product: $product, id: $id){\n        product{\n            updated\n            name\n            sku\n            id\n        }\n    }\n}"]))),p=Object(u["a"])(c||(c=Object(i["a"])(["query getProduct($sku: String!){\n    getProduct(sku: $sku){\n        name\n        id\n        price\n        category{\n            id\n        }\n        store{\n            id\n        }\n        active\n        stock\n    }\n}"])))},c8d2:function(t,e,r){var a=r("5e77").PROPER,n=r("d039"),o=r("5899"),c="​᠎";t.exports=function(t){return n((function(){return!!o[t]()||c[t]()!==c||a&&o[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-e95a19a4.cd961006.js.map