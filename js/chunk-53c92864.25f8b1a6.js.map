{"version":3,"sources":["webpack:///./node_modules/core-js/internals/delete-property-or-throw.js","webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/api/graphql/mutations/products.js","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./src/api/graphql/query/products.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/router/views/products/productList.vue","webpack:///src/router/views/products/productList.vue","webpack:///./src/router/views/products/productList.vue?7753","webpack:///./src/router/views/products/productList.vue?185e"],"names":["tryToString","$TypeError","TypeError","module","exports","O","P","Object","is","x","y","DELETE_PRODUCT","gql","CREATE_PRODUCT","UPDATE_PRODUCT","GET_PRODUCT","call","fixRegExpWellKnownSymbolLogic","anObject","requireObjectCoercible","sameValue","toString","getMethod","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","this","searcher","undefined","RegExp","string","rx","S","res","done","value","previousLastIndex","lastIndex","result","index","ALL_PRODUCTS_CURRENT_STORE_USER","PRODUCTS_LOW_STOCK","$","toObject","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","doesNotExceedSafeInteger","arraySpeciesCreate","createProperty","deletePropertyOrThrow","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","len","actualStart","argumentsLength","arguments","length","render","_vm","_c","_self","attrs","title","staticClass","on","$event","preventDefault","model","search","callback","$$v","expression","getProducts","_v","loadingProducts","bordered","striped","products","fields","scopedSlots","_u","key","fn","item","_s","formatPriceNumber","stock","price","can","staticStyle","name","params","sku","_e","deleteProduct","id","directives","rawName","modifiers","viewProduct","hasNextPage","selectedProduct","printBarCode","staticRenderFns","mixins","permissionMixin","components","Layout","PageHeader","data","lastCursor","label","watch","methods","isSearch","query","variables","cursor","productName","response","listProducts","toast","formatDataTable","storeName","type","deleteProductMutate","idInt","decode_bs64","mutation","Swal","text","icon","showCancelButton","confirmButtonText","confirmButtonColor","cancelButtonText","cancelButtonColor","showLoaderOnConfirm","preConfirm","then","alertBasic","catch","allowOutsideClick","allowEscapeKey","windowPrint","beforeMount","component"],"mappings":"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","file":"js/chunk-53c92864.25f8b1a6.js","sourcesContent":["'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es-x/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","import gql from 'graphql-tag'\n\nconst DELETE_PRODUCT = gql`mutation deleteProduct($id: ID!){\n    deleteProduct(id: $id){\n        success\n    }\n}`\n\nconst CREATE_PRODUCT = gql`mutation createProduct($product: ProductCreateInput!){\n    createProduct(product: $product){\n        product{\n            id \n            name \n            image \n            sku\n        }\n    }\n}\n`\nconst UPDATE_PRODUCT = gql`mutation updateProduct($product: ProductEditInput!, $id: ID!){\n    updateProduct(product: $product, id: $id){\n        product{\n            updated\n            name\n            sku\n            id\n        }\n    }\n}`\n\nconst GET_PRODUCT = gql`query getProduct($sku: String!){\n    getProduct(sku: $sku){\n        name\n        id\n        price\n        category{\n            id\n        }\n        store{\n            id\n        }\n        active\n        stock\n    }\n}`\n\nexport {\n    DELETE_PRODUCT,\n    CREATE_PRODUCT,\n    UPDATE_PRODUCT,\n    GET_PRODUCT\n}","'use strict';\nvar call = require('../internals/function-call');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : getMethod(regexp, SEARCH);\n      return searcher ? call(searcher, regexp, O) : new RegExp(regexp)[SEARCH](toString(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeSearch, rx, S);\n\n      if (res.done) return res.value;\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","import gql from 'graphql-tag'\n\nconst ALL_PRODUCTS_CURRENT_STORE_USER = gql`query listProducts($cursor: String, $productName: String){\n    listProducts(after: $cursor, name_Icontains: $productName){\n        pageInfo{\n            hasNextPage\n        }\n        edges{\n            cursor\n            node{\n                name\n                id\n                stock\n                price\n                sku\n                store{\n                    name\n                }\n            }\n        }\n    }\n}`\n\nconst PRODUCTS_LOW_STOCK = gql`query productsLowStock($store: Int){\n    productsLowStock(store: $store){\n        stock\n        product\n        store\n        id\n    }\n}`\n\nexport {\n    ALL_PRODUCTS_CURRENT_STORE_USER,\n    PRODUCTS_LOW_STOCK\n}","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    doesNotExceedSafeInteger(len + insertCount - actualDeleteCount);\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) deletePropertyOrThrow(O, k - 1);\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else deletePropertyOrThrow(O, to);\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('layout',[_c('page-header',{attrs:{\"title\":_vm.title}}),[_c('div',[_c('b-card',{staticClass:\"mb-2\"},[_c('b-card-text',[_c('b-col',{attrs:{\"lg\":\"4\",\"md\":\"4\"}},[_c('b-form',{staticClass:\"mb-3\",on:{\"submit\":function($event){$event.preventDefault();}}},[_c('b-form-group',[_c('b-input-group',[_c('b-form-input',{attrs:{\"id\":\"input-1\",\"type\":\"text\",\"placeholder\":\"Buscar por nombre\",\"required\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"type\":\"submit\",\"disabled\":!_vm.search},on:{\"click\":function($event){return _vm.getProducts(true)}}},[_vm._v(\"Buscar\")])],1)],1)],1)],1)],1),(_vm.loadingProducts)?[_c('b-skeleton-table',{attrs:{\"rows\":10,\"columns\":4,\"table-props\":{ bordered: true, striped: true }}})]:[_c('div',{staticClass:\"table-responsive\"},[_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.products,\"fields\":_vm.fields,\"responsive\":\"sm\"},scopedSlots:_vm._u([{key:\"cell(stock)\",fn:function({ item }){return [_vm._v(\" \"+_vm._s(_vm.formatPriceNumber(item.stock, null))+\" \")]}},{key:\"cell(price)\",fn:function({ item }){return [_vm._v(\" \"+_vm._s(_vm.formatPriceNumber(item.price, 'currency'))+\" \")]}},{key:\"cell(actions)\",fn:function({ item }){return [(_vm.can('change_product'))?_c('router-link',{staticClass:\"btn btn-primary\",staticStyle:{\"margin-right\":\"2px\"},attrs:{\"to\":{ name: 'update-product', params: { sku: item.sku} }}},[_c('i',{staticClass:\"mdi mdi-book-edit\"})]):_vm._e(),(_vm.can('delete_product'))?_c('b-btn',{staticStyle:{\"margin-right\":\"2px\"},attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.deleteProduct(item.id, item.name)}}},[_c('i',{staticClass:\"mdi mdi-delete\"})]):_vm._e(),_c('b-btn',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.showProduct\",modifiers:{\"showProduct\":true}}],attrs:{\"variant\":\"success\"},on:{\"click\":function($event){return _vm.viewProduct(item.id)}}},[_c('i',{staticClass:\"mdi mdi-eye\"})])]}}])})],1)]],2)],1),(_vm.hasNextPage)?_c('div',{staticClass:\"text-center mt-2\"},[_c('b-button',{attrs:{\"block\":\"\",\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.getProducts()}}},[_vm._v(\" Ver más \")])],1):_vm._e()],1)],(_vm.selectedProduct)?_c('b-modal',{attrs:{\"id\":\"showProduct\",\"title\":_vm.selectedProduct.name,\"ok-only\":\"\",\"ok-title\":\"Aceptar\",\"size\":\"lg\"}},[_c('div',{staticClass:\"text-center\",attrs:{\"id\":\"bar-code\"}},[_c('barcode',{attrs:{\"value\":_vm.selectedProduct.sku,\"format\":\"\",\"width\":\"1\",\"fontOptions\":\"italic\"}})],1),_c('div',{staticClass:\"text-center\"},[_c('b-button',{on:{\"click\":_vm.printBarCode}},[_vm._v(\" Descargar el código de barras \")])],1)]):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <layout>\n    <page-header :title=\"title\"> </page-header>\n    <template>\n      <div>\n        <b-card\n          class=\"mb-2\"\n        >\n          <b-card-text>\n            <b-col lg=\"4\" md=\"4\">\n              <b-form @submit.prevent class=\"mb-3\">\n                <b-form-group\n                >\n                  <b-input-group>\n                    <b-form-input\n                      id=\"input-1\"\n                      v-model=\"search\"\n                      type=\"text\"\n                      placeholder=\"Buscar por nombre\"\n                      required\n                    ></b-form-input>\n                    <b-input-group-append>\n                      <b-button type=\"submit\" :disabled=\"!search\" @click=\"getProducts(true)\">Buscar</b-button>\n                    </b-input-group-append>                    \n                  </b-input-group>\n                </b-form-group>\n              </b-form>\n            </b-col>\n            <template v-if=\"loadingProducts\">\n              <b-skeleton-table\n                :rows=\"10\"\n                :columns=\"4\"\n                :table-props=\"{ bordered: true, striped: true }\"\n              ></b-skeleton-table>\n            </template>\n            <template v-else>\n              <div class=\"table-responsive\">\n                <b-table \n                  striped \n                  hover \n                  :items=\"products\" \n                  :fields=\"fields\"\n                  responsive=\"sm\"\n                >\n                  <template v-slot:cell(stock)=\"{ item }\">\n                    {{ formatPriceNumber(item.stock, null) }}\n                  </template>\n                  <template v-slot:cell(price)=\"{ item }\">\n                    {{ formatPriceNumber(item.price, 'currency') }}\n                  </template>\n                  <template v-slot:cell(actions)=\"{ item }\">\n                    <router-link \n                      v-if=\"can('change_product')\"\n                      class=\"btn btn-primary\"\n                      style=\"margin-right: 2px;\"\n                      :to=\"{ name: 'update-product', params: { sku: item.sku} }\">\n                      <i class=\"mdi mdi-book-edit\"></i>\n                    </router-link>\n                    <b-btn \n                      v-if=\"can('delete_product')\"\n                      style=\"margin-right: 2px;\" \n                      @click=\"deleteProduct(item.id, item.name)\" \n                      variant=\"danger\"\n                    >\n                      <i class=\"mdi mdi-delete\"></i>\n                    </b-btn>\n                    <b-btn\n                      @click=\"viewProduct(item.id)\" \n                      variant=\"success\"\n                      v-b-modal.showProduct\n                    >\n                      <i class=\"mdi mdi-eye\"></i>\n                    </b-btn>\n                  </template>\n                </b-table>\n              </div>\n            </template>\n          </b-card-text>\n        </b-card>\n        <div class=\"text-center mt-2\" v-if=\"hasNextPage\">\n          <b-button \n            block variant=\"primary\"\n            @click=\"getProducts()\"\n          >\n            Ver más\n          </b-button>\n        </div>\n      </div>\n    </template>\n    <b-modal \n      v-if=\"selectedProduct\"\n      id=\"showProduct\" \n      :title=\"selectedProduct.name\" \n      ok-only\n      ok-title=\"Aceptar\"\n      size=\"lg\"\n    >\n      <div class=\"text-center\" id=\"bar-code\">\n        <barcode \n          :value=\"selectedProduct.sku\" \n          format=\"\"\n          width=\"1\"\n          fontOptions=\"italic\"\n        ></barcode>\n      </div>\n      <div class=\"text-center\">\n        <b-button\n          @click=\"printBarCode\"\n        >\n          Descargar el código de barras\n        </b-button>\n      </div>\n    </b-modal>\n  </layout>\n</template>\n<script>\nimport Layout from \"../../layouts/main\";\nimport PageHeader from \"@/components/page-header\";\nimport { ALL_PRODUCTS_CURRENT_STORE_USER } from '@/api/graphql/query/products'\nimport { DELETE_PRODUCT } from '@/api/graphql/mutations/products'\nimport { formatPrice, printBarCode, decode_bs64 } from '@/utils/general'\nimport { toast, alertBasic } from '@/utils/alerts'\nimport VueBarCode from 'vue-barcode'\nimport Swal from 'sweetalert2'\nimport permissionMixin from '@/mixins/permissionMixin'\n\nexport default {\n  mixins: [\n    permissionMixin\n  ],\n  components: {\n    Layout,\n    PageHeader,\n    'barcode': VueBarCode\n  },\n  data() {\n    return {\n      title: \"Productos\",\n      products: [],\n      hasNextPage: null,\n      lastCursor: null,\n      loadingProducts: true,\n      fields: [\n        {\n          key: 'name',\n          label: 'Producto',\n        },\n        {\n          key: 'storeName',\n          label: 'Tienda'\n        },\n        {\n          key: 'stock',\n        },\n        {\n          key: 'price',\n          label: 'Precio',\n        },\n        {\n          key: 'actions',\n          label: 'Acciones'\n        }\n      ],\n      search: null,\n      selectedProduct: null\n    }\n  },\n  watch: {\n    search: function(newValue){\n      if (newValue === ''){\n        this.products = []\n        this.lastCursor = null\n        this.getProducts()\n      }\n    }\n  },\n  methods: {\n    async getProducts(isSearch = false){\n      this.loadingProducts = true\n      if (isSearch === true){\n        this.products = []\n        this.lastCursor = null\n      }\n      try { \n        const response = await this.$apollo.query({\n          query: ALL_PRODUCTS_CURRENT_STORE_USER,\n          variables: {\n            cursor: this.lastCursor,\n            productName: this.search\n          }\n        })\n        const { listProducts } = response.data\n        if (listProducts !== null){\n          const data = listProducts.edges\n          this.hasNextPage = listProducts.pageInfo.hasNextPage\n          this.formatDataTable(data)\n        }\n        this.loadingProducts = false\n      } catch (error) {\n        this.loadingProducts = false\n        toast('error', 'No se pudo recuperar la información')\n      }\n    },\n    formatDataTable(data){\n      for (let product of data){\n        const { node } = product\n        const temp = {\n          id: node.id,\n          name: node.name,\n          storeName: node.store.name,\n          price: node.price,\n          stock: node.stock,\n          sku: node.sku\n        }\n        this.products.push(temp)\n        this.lastCursor = product.cursor\n      }\n    },\n    formatPriceNumber(value, type){\n      return formatPrice(value, type)\n    },\n    async deleteProductMutate(id){\n      const idInt = decode_bs64( id ).split(':')[1]\n      try {\n        const response = await this.$apollo.mutate({\n          mutation: DELETE_PRODUCT,\n          variables: {\n            id: idInt\n          }\n        })\n        const { deleteProduct } = response.data\n        if (deleteProduct !== null){\n          return deleteProduct.success\n        }\n      } catch (error) {\n        return false\n      }\n    },\n    deleteProduct(id, name){\n      Swal.fire({\n        title: '¿Estas seguro?',\n        text: `Archivar producto: \"${name}\"`,\n        icon: 'question',\n        showCancelButton: true,\n        confirmButtonText: 'Si, Archivar',\n        confirmButtonColor: '#bb2d3b',\n        cancelButtonText: 'No, cancelar',\n        cancelButtonColor: '',\n        showLoaderOnConfirm: true,\n        preConfirm: () => {\n          return this.deleteProductMutate(id).\n            then(result => {\n              if (result === true){\n                const index = this.products.findIndex((product) => product.id == id)\n                this.products.splice(index, 1)\n                alertBasic('Archivado!', `El producto \"${name}\" ha sido archivado con exito.`, 'success')\n              }else{\n                alertBasic('', 'No se ha podido completar la operación', 'error')\n              }\n            })\n            .catch(error => {\n              Swal.showValidationMessage(\n                `No se ha podido completar la operación`\n              )\n            })\n        },\n        allowOutsideClick: false,\n        allowEscapeKey: false\n      })\n    },\n    viewProduct( id ){\n      const index = this.products.findIndex(product => product.id === id)\n      this.selectedProduct = this.products[index]\n    },\n    printBarCode(){\n      const barCode = document.getElementById('bar-code')\n      const windowPrint = window.open()\n      windowPrint.document.write( barCode.innerHTML )\n      windowPrint.document.close()\n      windowPrint.print()\n      windowPrint.close()\n    }\n  },\n  beforeMount(){\n    this.getProducts()\n  }\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productList.vue?vue&type=template&id=98c0888e&\"\nimport script from \"./productList.vue?vue&type=script&lang=js&\"\nexport * from \"./productList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}