{"version":3,"sources":["webpack:///./src/router/views/dashboards/default.vue","webpack:///./src/components/widgets/stat.vue","webpack:///src/components/widgets/stat.vue","webpack:///./src/components/widgets/stat.vue?487d","webpack:///./src/components/widgets/stat.vue?e26d","webpack:///./src/components/widgets/productsLowStock.vue","webpack:///src/components/widgets/productsLowStock.vue","webpack:///./src/components/widgets/productsLowStock.vue?c9b8","webpack:///./src/components/widgets/productsLowStock.vue?05c0","webpack:///./src/api/graphql/query/expense.js","webpack:///src/router/views/dashboards/default.vue","webpack:///./src/router/views/dashboards/default.vue?8618","webpack:///./src/router/views/dashboards/default.vue?7675","webpack:///./src/api/graphql/query/stores.js","webpack:///./src/api/graphql/query/products.js","webpack:///./src/api/graphql/query/dispatchs.js"],"names":["render","_vm","this","_c","_self","attrs","title","can","staticClass","maxDate","model","value","startDate","callback","$$v","expression","minEndDate","endDate","disabledButtonSend","on","$event","getDataReports","loadingReports","_v","directives","name","rawName","clear","_l","statData","stat","key","icon","hasData","percent","expenseChartData","expenseChart","series","chartOptions","handleClickExpenseChart","_e","expenseProductChartData","expenseProductChart","returnsDispatchsChartData","returnsDispatchsChart","products","fetchingStats","staticRenderFns","_s","class","props","type","default","component","updating","bordered","striped","_m","data","id","product","stock","store","REPORT_EXPENSE_BY_STORE","gql","REPORT_EXPENSE_BY_PRODUCT","mixins","page","meta","content","components","Layout","PageHeader","ProductsLowStock","Stat","s","allStores","chart","toolbar","show","plotOptions","bar","horizontal","dataLabels","enabled","colors","grid","borderColor","xaxis","categories","columnWidth","endingShape","stroke","width","fill","opacity","position","offsetY","style","fontSize","labels","axisBorder","axisTicks","crosshairs","gradient","colorFrom","colorTo","stops","opacityFrom","opacityTo","tooltip","shade","shadeIntensity","gradientToColors","inverseColors","yaxis","expenseByStoreId","returnsDispatchsStoreId","watch","computed","methods","calculatePercen","totalDisptachs","totalReturns","event","chartContext","config","getProducts","query","response","productsLowStock","toast","updateExpenseChart","updateReturnsDispatchsChart","updateExpenseChartByProduct","getExpenseByStore","variables","expenseByStore","getDispatchsAndReturns","returnsDispatchs","getExpenseByProduct","expenseByProducts","formatDataDispatchsReturns","series_despachos","series_returns","formatDataExpense","formatDataExpenseByProduct","sumProducts","total","sumDispatchsAndReturns","getAllStores","item","newDataByStore","storeId","beforeMount","LISTSTORES","ALL_STORES","ALL_PRODUCTS_CURRENT_STORE_USER","PRODUCTS_LOW_STOCK","LIST_DISPATCHS","DISPATCHS_RETURNS_BY_STORE"],"mappings":"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O,MACAC,aAIArD,qBACAL,QACA,CACAZ,gBACAiC,UAGApB,cACAuC,OACAC,SACAC,UAGAC,aACAC,KACAE,YACAa,kBAIAb,YACAC,WACAa,YACAC,OACAC,gBACAd,qBAGAA,mBACAC,MACAC,uBAEAC,OACAC,cACAO,eACAI,QACAH,aAEAI,YACAtB,SAEAuB,WACAvB,SAEAwB,YACAT,MACA3C,gBACAqD,UACAC,oBACAC,kBACAC,cACAC,eACAC,gBAIAC,SACA1B,WACAa,cAGAH,MACAU,UACAO,cACA5D,kBACA6D,mBACAC,wBACAC,iBACAN,cACAC,YACAF,uBAGAQ,OACAd,YACAtB,SAEAuB,WACAvB,SAEAqB,QACArB,YAKAlD,UACA,CACAG,sBACA1B,2BACAK,wBACAsB,YAEA,CACAD,wBACA1B,2BACAK,wBACAsB,YAEA,CACAD,8BACA1B,8BACAK,wBACAsB,aAGAmF,oBACAC,6BAGAC,OACA1G,sBACA,8BACA,6BAEA,+BACA,WACAA,gBACAA,aACAA,eAEA,oBAGA2G,UACArG,mBADA,WAEA,4EAGA,qBACA,KAKAsG,SACAC,gBADA,SACAC,EAAAC,GACA,4BAEApF,wBAJA,SAIAqF,EAAAC,EAAAC,GACA,uBACA,WAGA,+BACA,4BACA,yBAEAC,YAbA,WAaA,qLAEA,iBACAC,eAHA,OAEAC,EAFA,OAKAC,EAAAD,OAAAC,iBACA,SACA,aAEAC,8DAEA,mBAXA,mDAaA,mBACAA,8DAdA,4DAiBA9G,eA9BA,WA8BA,2JACA,oBACA,sBACA,6BAHA,SAIA,sBAJA,uBAKA,2BALA,OAMA,oBANA,8CAQA+G,mBAtCA,SAsCA/F,EAAAoD,GACA,2BACA,gEACA,gCACA,CACAD,OACAC,iBAKA4C,4BAjDA,SAiDAhG,EAAAoD,GACA,oCACA,yEACA,yCACA,CACAD,OACAC,iBAKA6C,4BA5DA,SA4DAjG,EAAAoD,GACA,kCACA,uEACA,uCACA,CACAD,OACAC,iBAKA8C,kBAvEA,WAuEA,mKACA,6BADA,kBAGA,iBACAP,QACAQ,WACA5H,sBACAK,qBAPA,OAGAgH,EAHA,OAUAQ,EAAAR,OAAAQ,eACA,UACA,uBACA,kBAEAN,yEAfA,mDAkBAA,yEAlBA,4DAqBAO,uBA5FA,WA4FA,qLAEA,iBACAV,aACAQ,WACA5H,sBACAK,qBANA,OAEAgH,EAFA,OASAU,EAAAV,OAAAU,iBACA,UACA,4BACA,iCAEAR,eACA,QACA,mEAhBA,mDAoBAA,eACA,QACA,mEAtBA,4DA0BAS,oBAtHA,SAsHA9E,GAAA,qLAEA,iBACAkE,QACAQ,WACA5H,sBACAK,kBACA6C,WAPA,OAEAmE,EAFA,OAUAY,EAAAZ,OAAAY,kBACA,SACA,gCAEAV,eACA,QACA,+DAhBA,mDAoBAA,eACA,QACA,+DAtBA,4DA0BAW,2BAhJA,SAgJApF,GACA,IADI,EACJ,GACAjC,iBACAiC,SAEA,GACAjC,oBACAiC,SAEA,KATA,iBAUAA,GAVA,IAUA,0CACAqF,yBACAC,uBACAvD,oBACA,8CAdA,8BAgBA,SACApD,UACAA,UACA,sCACA,mCAEA4G,kBAtKA,SAsKAvF,GACA,IADI,EACJ,IAAAjC,gBAAAiC,UACA,KAFA,iBAGAA,GAHA,IAGA,0CACArB,wBACAoD,oBACA,uCANA,8BAQA,6BACA,0BAEAyD,2BAjLA,SAiLAxF,GACA,IADI,EACJ,IAAAjC,gBAAAiC,UACA,KAFA,iBAGAA,GAHA,IAGA,0CACArB,wBACAoD,uBALA,8BAOA,sCACA,iCAEA0D,YA3LA,SA2LAzF,GAEA,IAFI,EAEJ,IAFA,iBAGAA,GAHA,IAGA,0CACA0F,YAJA,8BAMA,oCACA,6BAEAC,uBApMA,SAoMA3F,GAEA,IAFI,EAEJ,IACA,IAHA,iBAIAA,GAJA,IAIA,0CACAgE,eACAC,cANA,8BAQA,oCACA,4BACA,oCACA,4BACA,mEAEA2B,aAlNA,WAkNA,qLAEA,iBACAtB,eAHA,OAEAC,EAFA,OAKArD,EAAAqD,OAAArD,UACA,WACA,qBAPA,mDAUAuD,2BAVA,4DAaAxG,MA/NA,WAgOA,iCACA,+BACA,wCACA,wCACA,yBACA,kCACA,gCAPA,IAAI,EAAJ,iBAQA,eARA,IAQA,0CACA4H,cATA,gCAYAC,eA3OA,SA2OAC,GAKA,mEACA,sEAEA,2EACA,QACA,2BACA,2BACA,+BAEA,mDACA,+CACA,oCACA,oCACA,oEAGAC,YAnfA,WAofA,kCACA,mBACA,uBCloB+W,ICO3W,EAAY,eACd,EACA1J,EACA+C,GACA,EACA,KACA,KACA,MAIa,e,+IChBT4G,EAAa3F,eAAH,6PAeV4F,EAAa5F,eAAH,4K,wICfV6F,EAAkC7F,eAAH,4dAqB/B8F,EAAqB9F,eAAH,6K,sICrBlB+F,EAAiB/F,eAAH,45BA6BdgG,EAA6BhG,eAAH","file":"js/chunk-010a0829.12aa441a.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Layout',[_c('PageHeader',{attrs:{\"title\":_vm.title}}),(_vm.can('view_report_product'))?[_c('b-row',[_c('b-col',{attrs:{\"md\":\"4\"}},[_c('b-form-group',{staticClass:\"mb-2\"},[_c('b-form-datepicker',{attrs:{\"placeholder\":\"Fecha Inicial\",\"max\":_vm.maxDate,\"today-button\":\"\"},model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}})],1)],1),_c('b-col',{attrs:{\"md\":\"4\"}},[_c('b-form-group',{staticClass:\"mb-2\"},[_c('b-form-datepicker',{attrs:{\"placeholder\":\"Fecha Final\",\"max\":_vm.maxDate,\"min\":_vm.minEndDate,\"today-button\":\"\"},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1)],1),_c('b-col',{attrs:{\"md\":\"1\"}},[_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":_vm.disabledButtonSend},on:{\"click\":function($event){return _vm.getDataReports()}}},[(_vm.loadingReports)?[_c('b-spinner',{attrs:{\"small\":\"\"}})]:[_vm._v(\" Enviar \")]],2)],1),_c('b-col',{attrs:{\"md\":\"1\"}},[_c('b-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.startDate && _vm.endDate),expression:\"startDate && endDate\"}],attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.clear()}}},[_vm._v(\" Limpiar \")])],1)],1),_c('div',{staticClass:\"row\"},[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('div',{staticClass:\"row\"},_vm._l((_vm.statData),function(stat){return _c('div',{key:stat.icon,staticClass:\"col-md-4\"},[_c('Stat',{attrs:{\"icon\":stat.icon,\"title\":stat.title,\"value\":stat.value,\"hasData\":stat.hasData,\"percent\":stat.percent}})],1)}),0)]),(_vm.expenseChartData)?_c('b-col',{attrs:{\"md\":\"12\"}},[_c('b-card',{attrs:{\"title\":\"Egresos por tienda\"}},[_c('b-card-text',[_c('apexchart',{staticClass:\"apex-charts\",attrs:{\"height\":\"350\",\"type\":\"bar\",\"dir\":\"ltr\",\"series\":_vm.expenseChart.series,\"options\":_vm.expenseChart.chartOptions},on:{\"click\":_vm.handleClickExpenseChart}})],1)],1)],1):_vm._e(),(_vm.expenseProductChartData)?_c('b-col',{attrs:{\"md\":\"12\"}},[_c('b-card',{attrs:{\"title\":\"Egresos por producto\"}},[_c('b-card-text',[_c('apexchart',{staticClass:\"apex-charts\",attrs:{\"height\":\"350\",\"type\":\"bar\",\"dir\":\"ltr\",\"series\":_vm.expenseProductChart.series,\"options\":_vm.expenseProductChart.chartOptions}})],1)],1)],1):_vm._e(),(_vm.returnsDispatchsChartData)?_c('b-col',{attrs:{\"md\":\"12\"}},[_c('b-card',{attrs:{\"title\":\"Devoluciones y despachos\"}},[_c('b-card-text',[_c('apexchart',{staticClass:\"apex-charts\",attrs:{\"height\":\"350\",\"type\":\"bar\",\"dir\":\"ltr\",\"series\":_vm.returnsDispatchsChart.series,\"options\":_vm.returnsDispatchsChart.chartOptions}})],1)],1)],1):_vm._e(),_c('div',{staticClass:\"col-lg-12\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('h4',{staticClass:\"card-title mb-4\"},[_vm._v(\"Productos bajos de inventario\")]),_c('products-low-stock',{attrs:{\"products\":_vm.products,\"updating\":_vm.fetchingStats}})],1)])])],1)]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.hasData)?_c('div',{staticClass:\"card mini-stats-wid\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-grow-1\"},[_c('p',{staticClass:\"text-muted fw-medium mb-2\"},[_vm._v(_vm._s(_vm.title))]),_c('h4',{staticClass:\"mb-0\"},[_vm._v(_vm._s(_vm.value)+\" \"),_c('span',{staticClass:\"badge bg-danger font-size-12\"},[_vm._v(_vm._s(_vm.percent))])])]),_c('div',{staticClass:\"avatar-sm align-self-center mini-stat-icon rounded-circle bg-primary\"},[_c('span',{staticClass:\"avatar-title\"},[_c('i',{class:`${_vm.icon} font-size-24`})])])])])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\r\n/**\r\n * Stat component -- specify the widget icon, title and value.\r\n */\r\nexport default {\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    icon: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    hasData: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    percent: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"card mini-stats-wid\" v-if=\"hasData\">\r\n    <div class=\"card-body\">\r\n      <div class=\"d-flex\">\r\n        <div class=\"flex-grow-1\">\r\n          <p class=\"text-muted fw-medium mb-2\">{{title}}</p>\r\n          <h4 class=\"mb-0\">{{value}}\r\n            <span class=\"badge bg-danger font-size-12\">{{ percent }}</span>\r\n          </h4>\r\n        </div>\r\n\r\n        <div class=\"avatar-sm align-self-center mini-stat-icon rounded-circle bg-primary\">\r\n          <span class=\"avatar-title\">\r\n            <i :class=\"`${icon} font-size-24`\"></i>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- end card-body -->\r\n  </div>\r\n  <!-- end card -->\r\n</template>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stat.vue?vue&type=template&id=3a381766&\"\nimport script from \"./stat.vue?vue&type=script&lang=js&\"\nexport * from \"./stat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.updating)?[_c('b-skeleton-table',{attrs:{\"rows\":10,\"columns\":4,\"table-props\":{ bordered: true, striped: true }}})]:[_c('div',{staticClass:\"table-responsive mb-0\"},[_c('table',{staticClass:\"table align-middle table-nowrap\"},[_vm._m(0),_c('tbody',_vm._l((_vm.products),function(data){return _c('tr',{key:data.id},[_c('td',[_vm._v(_vm._s(data.product))]),_c('td',[_vm._v(_vm._s(data.stock))]),_c('td',[_vm._v(_vm._s(data.store))])])}),0)])])]],2)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',{staticClass:\"table-light\"},[_c('tr',[_c('th',{staticClass:\"align-middle\"},[_vm._v(\"Producto\")]),_c('th',{staticClass:\"align-middle\"},[_vm._v(\"Unidades\")]),_c('th',{staticClass:\"align-middle\"},[_vm._v(\"Tienda\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <template v-if=\"updating\">\r\n      <b-skeleton-table\r\n        :rows=\"10\"\r\n        :columns=\"4\"\r\n        :table-props=\"{ bordered: true, striped: true }\"\r\n      ></b-skeleton-table>\r\n    </template>\r\n    <template v-else>\r\n      <div class=\"table-responsive mb-0\">\r\n        <table class=\"table align-middle table-nowrap\">\r\n          <thead class=\"table-light\">\r\n            <tr>\r\n              <th class=\"align-middle\">Producto</th>\r\n              <th class=\"align-middle\">Unidades</th>\r\n              <th class=\"align-middle\">Tienda</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"data in products\" :key=\"data.id\">\r\n              <td>{{ data.product }}</td>\r\n              <td>{{ data.stock }}</td>\r\n              <td>{{ data.store }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n  props: {\r\n    products: {\r\n      type: Array,\r\n      default: function () {\r\n        return [];\r\n      },\r\n    },\r\n    updating: {\r\n      type: Boolean,\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productsLowStock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productsLowStock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productsLowStock.vue?vue&type=template&id=954eb72c&\"\nimport script from \"./productsLowStock.vue?vue&type=script&lang=js&\"\nexport * from \"./productsLowStock.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import gql from 'graphql-tag'\n\nconst REPORT_EXPENSE_BY_STORE = gql`query reportExpense($store: Int, $startDate: Date!, $endDate: Date!){\n    expenseByStore(store: $store, startDate: $startDate, endDate: $endDate){\n        count\n        storeName\n        storeId\n    }\n}`\n\nconst REPORT_EXPENSE_BY_PRODUCT = gql`query expenseProduct($store: Int!, $startDate: Date!, $endDate: Date!){\n    expenseByProducts(store: $store, startDate: $startDate, endDate: $endDate){\n        productName\n        count\n        id\n    }\n}`\n\nexport {\n    REPORT_EXPENSE_BY_STORE,\n    REPORT_EXPENSE_BY_PRODUCT\n}","<template>\n  <Layout>\n    <PageHeader :title=\"title\" />\n    <template v-if=\"can('view_report_product')\">\n      <b-row>\n        <b-col md=\"4\">\n          <b-form-group class=\"mb-2\">\n            <b-form-datepicker\n              v-model=\"startDate\"\n              placeholder=\"Fecha Inicial\"\n              :max=\"maxDate\"\n              today-button\n            >\n            </b-form-datepicker>\n          </b-form-group>\n        </b-col>\n        <b-col md=\"4\">\n          <b-form-group class=\"mb-2\">\n            <b-form-datepicker\n              v-model=\"endDate\"\n              placeholder=\"Fecha Final\"\n              :max=\"maxDate\"\n              :min=\"minEndDate\"\n              today-button\n            >\n            </b-form-datepicker>\n          </b-form-group>\n        </b-col>\n        <b-col md=\"1\">\n          <b-button\n            @click=\"getDataReports()\"\n            variant=\"primary\"\n            :disabled=\"disabledButtonSend\"\n          >\n            <template v-if=\"loadingReports\">\n              <b-spinner small></b-spinner>\n            </template>\n            <template v-else>\n              Enviar\n            </template>  \n          </b-button>\n        </b-col>\n        <b-col md=\"1\">\n          <b-button\n            v-show=\"startDate && endDate\"\n            @click=\"clear()\"\n            variant=\"info\"\n          >\n            Limpiar\n          </b-button>\n        </b-col>\n      </b-row>\n      <div class=\"row\">\n        <b-col md=\"12\">\n          <div class=\"row\">\n            <div v-for=\"stat of statData\" :key=\"stat.icon\" class=\"col-md-4\">\n              <Stat\n                :icon=\"stat.icon\"\n                :title=\"stat.title\"\n                :value=\"stat.value\"\n                :hasData=\"stat.hasData\"\n                :percent=\"stat.percent\"\n              />\n            </div>\n          </div>\n        </b-col>\n        <b-col md=\"12\" v-if=\"expenseChartData\">\n          <b-card title=\"Egresos por tienda\">\n            <b-card-text>\n              <apexchart\n                class=\"apex-charts\"\n                height=\"350\"\n                type=\"bar\"\n                dir=\"ltr\"\n                :series=\"expenseChart.series\"\n                :options=\"expenseChart.chartOptions\"\n                @click=\"handleClickExpenseChart\"\n              ></apexchart>\n            </b-card-text>\n          </b-card>\n        </b-col>\n        <b-col md=\"12\" v-if=\"expenseProductChartData\">\n          <b-card title=\"Egresos por producto\">\n            <b-card-text>\n              <apexchart\n                class=\"apex-charts\"\n                height=\"350\"\n                type=\"bar\"\n                dir=\"ltr\"\n                :series=\"expenseProductChart.series\"\n                :options=\"expenseProductChart.chartOptions\"\n              ></apexchart>\n            </b-card-text>\n          </b-card>\n        </b-col>\n        <b-col md=\"12\" v-if=\"returnsDispatchsChartData\">\n          <b-card title=\"Devoluciones y despachos\">\n            <b-card-text>\n              <apexchart\n                class=\"apex-charts\"\n                height=\"350\"\n                type=\"bar\"\n                dir=\"ltr\"\n                :series=\"returnsDispatchsChart.series\"\n                :options=\"returnsDispatchsChart.chartOptions\"\n              ></apexchart>\n            </b-card-text>\n          </b-card>\n        </b-col>\n        <div class=\"col-lg-12\">\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <h4 class=\"card-title mb-4\">Productos bajos de inventario</h4>\n              <products-low-stock\n                :products=\"products\"\n                :updating=\"fetchingStats\"\n              ></products-low-stock>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </Layout>\n</template>\n<script>\nimport Stat from \"@/components/widgets/stat\";\nimport permissionMixin from \"@/mixins/permissionMixin\";\nimport Layout from \"../../layouts/main\";\nimport appConfig from \"@/app.config\";\nimport PageHeader from \"@/components/page-header\";\nimport ProductsLowStock from \"@/components/widgets/productsLowStock\";\nimport { PRODUCTS_LOW_STOCK } from \"@/api/graphql/query/products\";\nimport {\n  REPORT_EXPENSE_BY_STORE,\n  REPORT_EXPENSE_BY_PRODUCT,\n} from \"@/api/graphql/query/expense\";\nimport { DISPATCHS_RETURNS_BY_STORE } from \"@/api/graphql/query/dispatchs\";\nimport { ALL_STORES } from \"@/api/graphql/query/stores\";\nimport { toast } from \"@/utils/alerts\";\n\nexport default {\n  mixins: [permissionMixin],\n  page: {\n    title: \"Dashboard\",\n    meta: [\n      {\n        name: \"description\",\n        content: appConfig.description,\n      },\n    ],\n  },\n  components: {\n    Layout,\n    PageHeader,\n    ProductsLowStock,\n    Stat,\n  },\n  data() {\n    const now = new Date();\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n\n    return {\n      s: null,\n      title: \"Dashboard\",\n      products: [],\n      fetchingStats: true,\n      loadingReports: false,\n      startDate: null,\n      endDate: null,\n      expenseChartData: false,\n      expenseProductChartData: false,\n      returnsDispatchsChartData: false,\n      maxDate: today,\n      minEndDate: null,\n      allStores: [],\n      expenseChart: {\n        series: [\n          {\n            data: [],\n          },\n        ],\n        chartOptions: {\n          chart: {\n            toolbar: {\n              show: false,\n            },\n          },\n          plotOptions: {\n            bar: {\n              horizontal: true,\n            },\n          },\n          dataLabels: {\n            enabled: false,\n          },\n          colors: [\"#34c38f\"],\n          grid: {\n            borderColor: \"#f1f1f1\",\n          },\n          xaxis: {\n            categories: [],\n          },\n        },\n      },\n      returnsDispatchsChart: {\n        series: [\n          {\n            name: \"Despachos\",\n            data: [],\n          },\n          {\n            name: \"Egresos\",\n            data: [],\n          },\n        ],\n        chartOptions: {\n          chart: {\n            toolbar: {\n              show: false,\n            },\n          },\n          plotOptions: {\n            bar: {\n              horizontal: false,\n              columnWidth: \"45%\",\n              endingShape: \"rounded\",\n            },\n          },\n          dataLabels: {\n            enabled: false,\n          },\n          stroke: {\n            show: true,\n            width: 2,\n            colors: [\"transparent\"],\n          },\n          colors: [\"#34c38f\", \"#556ee6\"],\n          xaxis: {\n            categories: [],\n          },\n          grid: {\n            borderColor: \"#f1f1f1\",\n          },\n          fill: {\n            opacity: 1,\n          },\n        },\n      },\n      expenseProductChart: {\n        series: [\n          {\n            name: \"Unidades\",\n            data: [],\n          },\n        ],\n        chartOptions: {\n          chart: {\n            toolbar: {\n              show: false,\n            },\n          },\n          plotOptions: {\n            bar: {\n              dataLabels: {\n                position: \"top\", // top, center, bottom\n              },\n            },\n          },\n          dataLabels: {\n            enabled: true,\n            offsetY: -22,\n            style: {\n              fontSize: \"12px\",\n              colors: [\"#304758\"],\n            },\n          },\n          colors: [\"#556ee6\"],\n          grid: {\n            borderColor: \"#f1f1f1\",\n          },\n          xaxis: {\n            categories: [],\n            position: \"top\",\n            labels: {\n              offsetY: -18,\n            },\n            axisBorder: {\n              show: false,\n            },\n            axisTicks: {\n              show: false,\n            },\n            crosshairs: {\n              fill: {\n                type: \"gradient\",\n                gradient: {\n                  colorFrom: \"#D8E3F0\",\n                  colorTo: \"#BED1E6\",\n                  stops: [0, 100],\n                  opacityFrom: 0.4,\n                  opacityTo: 0.5,\n                },\n              },\n            },\n            tooltip: {\n              enabled: true,\n              offsetY: -35,\n            },\n          },\n          fill: {\n            gradient: {\n              shade: \"light\",\n              type: \"horizontal\",\n              shadeIntensity: 0.25,\n              gradientToColors: undefined,\n              inverseColors: true,\n              opacityFrom: 1,\n              opacityTo: 1,\n              stops: [50, 0, 100, 100],\n            },\n          },\n          yaxis: {\n            axisBorder: {\n              show: false,\n            },\n            axisTicks: {\n              show: false,\n            },\n            labels: {\n              show: false,\n            },\n          },\n        },\n      },\n      statData: [\n        {\n          icon: \"bx bx-copy-alt\",\n          title: \"Total de productos\",\n          value: \"Sin información\",\n          hasData: false,\n        },\n        {\n          icon: \"bx bx-archive-in\",\n          title: \"Total de despachos\",\n          value: \"Sin información\",\n          hasData: false,\n        },\n        {\n          icon: \"bx bx-purchase-tag-alt\",\n          title: \"Total de devoluciones\",\n          value: \"Sin información\",\n          hasData: false,\n        },\n      ],\n      expenseByStoreId: [], /* Contiene los ids de las tiendas obtenidos en la query de egresos por tienda. */ \n      returnsDispatchsStoreId: [], /* Contiene los ids de las tiendas obtinidos en la query de devoluciones y despachos. */\n    };\n  },\n  watch: {\n    startDate: function (newValue) {\n      if (this.startDate > this.endDate) {\n        this.endDate = this.startDate;\n      }\n      const startDate = new Date(this.startDate);\n      const minDate = new Date(\n        startDate.getFullYear(),\n        startDate.getMonth(),\n        startDate.getDate() + 1\n      );\n      this.minEndDate = minDate;\n    },\n  },\n  computed: {\n    disabledButtonSend(){\n      if (this.startDate !== null && this.endDate !== null && !this.loadingReports){\n        return false\n      }\n      if(this.loadingReports){\n        return true\n      }\n      return true\n    }\n  },\n  methods: {\n    calculatePercen(totalDisptachs, totalReturns){\n      return Math.round((totalReturns * 100) / totalDisptachs)\n    },\n    handleClickExpenseChart(event, chartContext, config) {\n      const index = config.dataPointIndex\n      if (index === -1){\n        return\n      }\n      const storeId = this.expenseByStoreId[index]\n      this.getExpenseByProduct(storeId);\n      this.newDataByStore(storeId)\n    },\n    async getProducts() {\n      try {\n        const response = await this.$apollo.query({\n          query: PRODUCTS_LOW_STOCK,\n        });\n        const { productsLowStock } = response.data;\n        if (productsLowStock !== null) {\n          this.products = productsLowStock;\n        } else {\n          toast(\"error\", \"No se pudo recuperar la información\");\n        }\n        this.fetchingStats = false;\n      } catch (error) {\n        this.fetchingStats = false;\n        toast(\"error\", \"No se pudo recuperar la información\");\n      }\n    },\n    async getDataReports() {\n      this.loadingReports = true\n      this.expenseByStoreId = []\n      this.returnsDispatchsStoreId = []\n      await this.getExpenseByStore();\n      await this.getDispatchsAndReturns();\n      this.loadingReports = false\n    },\n    updateExpenseChart(series, categories) {\n      this.expenseChart.series = series;\n      this.expenseChart.chartOptions = {\n        ...this.expenseChart.chartOptions,\n        ...{\n          xaxis: {\n            categories: categories,\n          },\n        },\n      };\n    },\n    updateReturnsDispatchsChart(series, categories) {\n      this.returnsDispatchsChart.series = series;\n      this.returnsDispatchsChart.chartOptions = {\n        ...this.returnsDispatchsChart.chartOptions,\n        ...{\n          xaxis: {\n            categories: categories,\n          },\n        },\n      };\n    },\n    updateExpenseChartByProduct(series, categories) {\n      this.expenseProductChart.series = series;\n      this.expenseProductChart.chartOptions = {\n        ...this.expenseProductChart.chartOptions,\n        ...{\n          xaxis: {\n            categories: categories,\n          },\n        },\n      };\n    },\n    async getExpenseByStore() {\n      this.expenseProductChartData = false;\n      try {\n        const response = await this.$apollo.query({\n          query: REPORT_EXPENSE_BY_STORE,\n          variables: {\n            startDate: this.startDate,\n            endDate: this.endDate,\n          },\n        });\n        const { expenseByStore } = response.data;\n        if (expenseByStore !== null) {\n          this.formatDataExpense(expenseByStore);\n          this.sumProducts(expenseByStore);\n        } else {\n          toast(\"error\", \"No se pudo recuperar la información de egresos\");\n        }\n      } catch (error) {\n        toast(\"error\", \"No se pudo recuperar la información de egresos\");\n      }\n    },\n    async getDispatchsAndReturns() {\n      try {\n        const response = await this.$apollo.query({\n          query: DISPATCHS_RETURNS_BY_STORE,\n          variables: {\n            startDate: this.startDate,\n            endDate: this.endDate,\n          },\n        });\n        const { returnsDispatchs } = response.data;\n        if (returnsDispatchs !== null) {\n          this.sumDispatchsAndReturns(returnsDispatchs);\n          this.formatDataDispatchsReturns(returnsDispatchs);\n        } else {\n          toast(\n            \"error\",\n            \"No se pudo recuperar la información de devoluciones y despachos\"\n          );\n        }\n      } catch (error) {\n        toast(\n          \"error\",\n          \"No se pudo recuperar la información de devoluciones y despachos\"\n        );\n      }\n    },\n    async getExpenseByProduct(store) {\n      try {\n        const response = await this.$apollo.query({\n          query: REPORT_EXPENSE_BY_PRODUCT,\n          variables: {\n            startDate: this.startDate,\n            endDate: this.endDate,\n            store: store,\n          },\n        });\n        const { expenseByProducts } = response.data;\n        if (expenseByProducts !== null) {\n          this.formatDataExpenseByProduct(expenseByProducts);\n        } else {\n          toast(\n            \"error\",\n            \"No se pudo recuperar la información de egresos por producto\"\n          );\n        }\n      } catch (error) {\n        toast(\n          \"error\",\n          \"No se pudo recuperar la información de egresos por producto\"\n        );\n      }\n    },\n    formatDataDispatchsReturns(data) {\n      const series_despachos = {\n        name: \"Despachos\",\n        data: [],\n      };\n      const series_returns = {\n        name: \"Devoluciones\",\n        data: [],\n      };\n      const categories = [];\n      for (let item of data) {\n        series_despachos.data.push(item.dispatchs);\n        series_returns.data.push(item.returns);\n        categories.push(item.storeName);\n        this.returnsDispatchsStoreId.push(item.storeId)\n      }\n      const series = [];\n      series.push(series_despachos);\n      series.push(series_returns);\n      this.updateReturnsDispatchsChart(series, categories);\n      this.returnsDispatchsChartData = true;\n    },\n    formatDataExpense(data) {\n      const series = [{ name: \"Unidades\", data: [] }];\n      const categories = [];\n      for (let item of data) {\n        series[0].data.push(item.count);\n        categories.push(item.storeName);\n        this.expenseByStoreId.push(item.storeId)\n      }\n      this.updateExpenseChart(series, categories);\n      this.expenseChartData = true;\n    },\n    formatDataExpenseByProduct(data) {\n      const series = [{ name: \"Unidades\", data: [] }];\n      const categories = [];\n      for (let item of data) {\n        series[0].data.push(item.count);\n        categories.push(item.productName);\n      }\n      this.updateExpenseChartByProduct(series, categories);\n      this.expenseProductChartData = true;\n    },\n    sumProducts(data) {\n      /* Obtiene el total de productos que han salido. */\n      let total = 0;\n      for (let item of data) {\n        total += item.count;\n      }\n      this.statData[0].value = total.toString();\n      this.statData[0].hasData = true;\n    },\n    sumDispatchsAndReturns(data) {\n      /* Obtiene el total de despachos y devoluciones realizados. */\n      let totalDisptachs = 0;\n      let totalReturns = 0;\n      for (let item of data) {\n        totalDisptachs += item.dispatchs;\n        totalReturns += item.returns;\n      }\n      this.statData[1].value = totalDisptachs.toString();\n      this.statData[1].hasData = true;\n      this.statData[2].value = totalReturns.toString();\n      this.statData[2].hasData = true;\n      this.statData[2].percent = `${this.calculatePercen(totalDisptachs, totalReturns)}%`\n    },\n    async getAllStores() {\n      try {\n        const response = await this.$apollo.query({\n          query: ALL_STORES,\n        });\n        const { allStores } = response.data;\n        if (allStores !== null) {\n          this.allStores = allStores.edges;\n        }\n      } catch (error) {\n        toast(\"error\", \"\");\n      }\n    },\n    clear(){\n      this.startDate = this.endDate = null\n      this.updateExpenseChart([], [])\n      this.updateReturnsDispatchsChart([], [])\n      this.updateExpenseChartByProduct([], [])\n      this.expenseChartData = false\n      this.returnsDispatchsChartData = false\n      this.expenseProductChartData = false\n      for (let item of this.statData){\n        item.hasData = false\n      }\n    },\n    newDataByStore(storeId){\n      /* Obtiene la información de la data que se encuentra en los graficos de\n        Egresos por tienda, devoluciones y despachos y la pone en las tarjetas\n        como un valor consolidado de la tienda seleccionada en el grafico de egresos por tienda.\n      */\n      const indexByStore = this.expenseByStoreId.findIndex(id => id === storeId)\n      this.statData[0].value = this.expenseChart.series[0].data[indexByStore].toString()\n\n      const indexReturnsDispatchs = this.returnsDispatchsStoreId.findIndex(id => id === storeId)\n      if (indexReturnsDispatchs === -1){\n        this.statData[1].value = '0'\n        this.statData[2].value = '0'\n        this.statData[2].percent = '0%'\n      }\n      const totalDisptachs = this.returnsDispatchsChart.series[0].data[indexReturnsDispatchs]\n      const totalReturns = this.returnsDispatchsChart.series[1].data[indexReturnsDispatchs]\n      this.statData[1].value = totalDisptachs.toString()\n      this.statData[2].value = totalReturns.toString()\n      this.statData[2].percent = `${this.calculatePercen(totalDisptachs, totalReturns)}%`\n    }\n  },\n  beforeMount() {\n    if (this.can(\"view_report_product\")) {\n      this.getProducts();\n      this.getAllStores();\n    }\n  },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./default.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./default.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./default.vue?vue&type=template&id=45665c25&\"\nimport script from \"./default.vue?vue&type=script&lang=js&\"\nexport * from \"./default.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import gql from 'graphql-tag'\n\nconst LISTSTORES = gql`query listStore{\n    allStoresUser{\n        pageInfo{\n            hasNextPage\n        }\n        edges{\n            cursor\n            node{\n                name\n                id\n            }\n        }\n    }\n}`\n\nconst ALL_STORES = gql`query stores{\n    allStores{\n        edges{\n            node{\n                name\n                id\n            }\n        }\n    }\n}`\n\nexport {\n    LISTSTORES,\n    ALL_STORES\n}","import gql from 'graphql-tag'\n\nconst ALL_PRODUCTS_CURRENT_STORE_USER = gql`query listProducts($cursor: String, $productName: String){\n    listProducts(after: $cursor, name_Icontains: $productName){\n        pageInfo{\n            hasNextPage\n        }\n        edges{\n            cursor\n            node{\n                name\n                id\n                stock\n                price\n                sku\n                store{\n                    name\n                }\n            }\n        }\n    }\n}`\n\nconst PRODUCTS_LOW_STOCK = gql`query productsLowStock($store: Int){\n    productsLowStock(store: $store){\n        stock\n        product\n        store\n        id\n    }\n}`\n\nexport {\n    ALL_PRODUCTS_CURRENT_STORE_USER,\n    PRODUCTS_LOW_STOCK\n}","import gql from 'graphql-tag'\n\nconst LIST_DISPATCHS = gql`query allDispatchs($store: String, $guide: String,\n    $cursor: String, $includeStore: Boolean!, $includeSku: Boolean!, $startDate: DateTime,\n    $endDate: DateTime, $first: Int){\n    dispatchs(store_Name_Iexact: $store, guide_Icontains: $guide after: $cursor,\n        created_Date_Gte: $startDate, created_Date_Lte: $endDate, first: $first){\n        pageInfo{\n            hasNextPage\n        }\n        edges{\n            cursor\n            node{\n                guide\n                created\n                productpackagethroughSet{\n                    product{\n                        name\n                        sku @include(if: $includeSku)\n                        id\n                    }\n                    quantity\n                }\n                store @include(if: $includeStore){\n                    name\n                }\n            }\n        }\n    }\n}`\n\nconst DISPATCHS_RETURNS_BY_STORE = gql`query DispatchsReturns($store: Int, $startDate: Date!, $endDate: Date!){\n    returnsDispatchs(startDate: $startDate, endDate: $endDate, store: $store){\n        dispatchs\n        returns\n        storeName\n        storeId\n    }\n}`\n\nexport {\n    LIST_DISPATCHS,\n    DISPATCHS_RETURNS_BY_STORE\n}"],"sourceRoot":""}